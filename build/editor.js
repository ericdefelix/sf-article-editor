!function(t){function e(e){for(var o,c,l=e[0],s=e[1],r=e[2],u=0,b=[];u<l.length;u++)c=l[u],a[c]&&b.push(a[c][0]),a[c]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o]);for(d&&d(e);b.length;)b.shift()();return i.push.apply(i,r||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,l=1;l<n.length;l++){var s=n[l];0!==a[s]&&(o=!1)}o&&(i.splice(e--,1),t=c(c.s=n[0]))}return t}var o={},a={0:0},i=[];function c(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=t,c.c=o,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)c.d(n,o,function(e){return t[e]}.bind(null,o));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="";var l=window.webpackJsonp=window.webpackJsonp||[],s=l.push.bind(l);l.push=e,l=l.slice();for(var r=0;r<l.length;r++)e(l[r]);var d=s;i.push([70,1]),n()}({58:function(t,e,n){},6:function(t,e){t.exports={elems:{textEditor:{ui_label:"Text Editor",template:function(t){return"\n\t\t\t\t\t<span>Click here to start editing</span>\n\t\t\t\t"},hasChildContent:!1,ckeditorBindToElem:"container",ckeditorConfig:{}},styledLists:{ui_label:"Styled Lists",template:function(t){var e=void 0===t?"ol":t;return"\n\t\t\t\t\t<".concat(e,' class="list-bullet-circular">\n\t\t\t\t\t\t<li>Click here to start editing list</li>\n\t\t\t\t\t\t<li>Or paste content here.</li>\n\t\t\t\t\t</').concat(e,">")},hasChildContent:!1,ckeditorBindToElem:"container",ckeditorConfig:{toolbar:[{name:"clipboard",items:["Cut","Copy","Paste","PasteFromWord","-","Undo","Redo"]},{name:"basicstyles",items:["Bold","Italic","Underline","Strike","Subscript","Superscript"]},{name:"paragraph",items:["NumberedList","BulletedList"]},{name:"links",items:["Link","Unlink"]}],copyFormatting_allowRules:!1,extraAllowedContent:"ol(list-bullet-circular);ul(list-bullet-circular)",disaAllowedContent:"h1 h2 h3 h4 p span blockquote img embed",on:{instanceReady:function(t){t.editor.on("beforeCommandExec",function(e){for(key in e.data)if("name"===key){var n=e.data[key];if("bulletedlist"==n||"numberedlist"==n){var o=t.editor;o.focus(),o.document.$.execCommand("SelectAll",!1,null)}}},null,null,100),t.editor.on("afterCommandExec",function(e){for(key in e.data)if("name"===key){var n=e.data[key];if("bulletedlist"==n||"numberedlist"==n){var o=t.editor.getSelection().getStartElement().getParent().$,a=o.nodeName;"OL"!==a&&"UL"!==a||o.classList.add("list-bullet-circular")}}},null,null,100)}}}},blockQuotes:{ui_label:"Block Quotes",types:[{ui_label:"Info",ui_value:"info"},{ui_label:"Tip",ui_value:"tip"},{ui_label:"Attention",ui_value:"alert"}],template:function(t){return'\n\t\t\t\t<div class="blockquote blockquote-'.concat(void 0===t?"info":t,'" role="blockquote">\n\t\t\t\t\t<span class="blockquote-addon">\n\t\t\t\t\t\t<i class="blockquote-icon"></i>\n\t\t\t\t\t</span>\n\t\t\t\t\t<div class="blockquote-content">\n\t\t\t\t\t\t<h5 class="blockquote-content-header">Click here to edit heading</h5>\n\t\t\t\t\t\t<div class="blockquote-content-body">\n\t\t\t\t\t\t\t<p>Click here to edit/paste content.</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>')},hasChildContent:!1,ckeditorBindToElem:"content",ckeditorConfig:{toolbar:[{name:"clipboard",items:["Cut","Copy","Paste","PasteFromWord","-","Undo","Redo"]},{name:"basicstyles",items:["Bold","Italic","Underline","Strike","Subscript","Superscript","-","CopyFormatting","RemoveFormat"]},{name:"links",items:["Link","Unlink"]}],disaAllowedContent:"h1 h2 h3 h4 p span blockquote img embed"}},wellContainer:{ui_label:"Generic Box",template:function(t){return'\n\t\t\t\t\t<div class="well">\n\t\t\t\t\t\t<h5 class="well-heading">Click here to edit heading</h5>\n\t\t\t\t\t\t<div class="well-body"><p>Click here to edit/paste content.</p></div>\n\t\t\t\t\t</div>'},hasChildContent:!1,ckeditorBindToElem:"content",ckeditorConfig:{toolbar:[{name:"clipboard",items:["Cut","Copy","Paste","PasteFromWord","-","Undo","Redo"]},{name:"basicstyles",items:["Bold","Italic","Underline","Strike","Subscript","Superscript","-","CopyFormatting","RemoveFormat"]},{name:"links",items:["Link","Unlink"]}],disaAllowedContent:"h1 h2 h3 h4 p span blockquote img embed"}},genericTabs:{ui_label:"Generic Tabs",template:function(t){var e,n="",o="",a=function(){return Math.floor(9e4*Math.random())+1e4},i=[{label:"Desktop",id:"tab-"+a(),content:[]},{label:"Web",id:"tab-"+a(),content:[]},{label:"Mobile",id:"tab-"+a(),content:[]}];e=void 0===t?i:t.data.subnodes;for(var c=0;c<=i.length-1;c++){var l=e[c].id,s=e[c].label;n+='\n\t\t\t\t\t\t<li class="tab-item'.concat(0==c?" active":"",'">\n\t\t\t\t\t\t\t<a href="#" class="tab-item-link" data-target="').concat(l,'">').concat(s,"</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t"),o+='<section class="tab-content'.concat(0==c?" in":"",'" id="').concat(l,'"></section>')}return'\n\t\t\t\t\t<div class="tabs">\n\t\t\t\t\t\t<div class="tabs-bar"><ul class="tab-nav">'.concat(n,"</ul></div>").concat(o,"\n\t\t\t\t\t</div>\n\t\t\t\t")},ckeditorBindToElem:"none",hasChildContent:!0}},getTemplate:function(t,e){return this.elems[t].template(e)}}},70:function(t,e,n){"use strict";n.r(e);n(37),n(53),n(58),n(59),n(61),n(62),n(69);var o=n(6),a=n.n(o),i=n(8),c=n.n(i),l=n(36),s=n.n(l),r={crxID:"",ckeditorInstanceId:"",instanceHTML:"",outputPane:document.getElementById("outputContainer"),htmlSection:document.getElementById("htmlOutputContainer"),sourceSection:document.getElementById("viewSourcePreview"),btnPreview:document.getElementById("btnPreview"),btnSave:document.getElementById("btnSave"),btnClose:document.getElementById("btnCloseOutputContainer"),toggleView:document.getElementById("outputContainerToggleView"),existing_data:[],toolbox:void 0,init:function(){try{window.chrome.storage.sync.get(["ckeditorInstanceId"],function(t){r.ckeditorInstanceId=t.ckeditorInstanceId,r.instanceHTML=t.instanceHTML,r.btnSave.setAttribute("data-target",r.ckeditorInstanceId)}),r.crxID=window.chrome.runtime.id}catch(t){console.log("You are in build mode")}finally{this.build_ui(),this.init_sortable({container:document.getElementById("canvasContainer"),contentDraggableClass:".canvasDraggableMain"}),r.btnPreview.onclick=r.generate_html,r.btnSave.onclick=r.save_html,r.toggleView.onchange=r.html_view,r.btnClose.onclick=r.close_preview}},build_ui:function(){c.a.render("canvas",{data:r.existing_data,trigger:"auto",callback:function(){c.a.render("toolbox",a.a.elems);for(var t=document.querySelectorAll('[data-action="add-component"]'),e=document.querySelectorAll('[data-action="select-component"]'),n=0;n<=e.length-1;n++){e[n].onclick=r._bindEvtDisplayToolbox}for(var o=0;o<=t.length-1;o++){t[o].onclick=r._bindEvtAddComponent}document.addEventListener("click",function(t){null===function(t,e){for(Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),n=e.length;--n>=0&&e.item(n)!==this;);return n>-1});t&&t!==document;t=t.parentNode)if(t.matches(e))return t;return null}(t.target,".canvas-add-component")&&toolbox.classList.remove("in")},!1)}})},_bindEvtDisplayToolbox:function(){r.toolbox=document.getElementById("toolbox"),toolbox.classList.remove("in"),toolbox.style.display="block",this.parentElement.appendChild(toolbox);var t=toolbox.offsetWidth,e=this.parentElement.classList.contains("canvas-add-subcontent");toolbox.style.left=e?"0":"calc(50% - "+(t/2+4)+"px)",toolbox.classList.contains("in")?toolbox.classList.remove("in"):toolbox.classList.add("in"),toolbox.focus()},_bindEvtAddComponent:function(){var t=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(2,10),e=this.getAttribute("data-ui-label"),n=(this.closest(".canvas-add-subcontent"),a.a.elems[e].ckeditorBindToElem),o={};c.a.render("content",{id:t,type:e,data:a.a.elems[e],trigger:this,callback:function(i){var c=document.getElementById("snippet-"+t),l=function(t,e,n){var o=document.querySelector("#snippet-"+t+" ."+e),a=document.querySelector("#snippet-"+t+" ."+n);o.contentEditable=!0,a.contentEditable=!0,o.onblur=r._bindEvtHeaderInput,a.id="contentEditableBody-"+t};("blockQuotes"==e&&(l(t,"blockquote-content-header","blockquote-content-body"),document.querySelector('[data-target="snippet-'+t+'"]').onchange=r._bindEvtSelectionDropdown),"wellContainer"==e&&l(t,"well-heading","well-body"),"genericTabs"==e)&&c.querySelectorAll(".tab-content").forEach(function(t,e){var n=t.getAttribute("id");r.init_sortable({container:document.getElementById(n),contentDraggableClass:".canvasDraggableSub_"+n})});if("styledLists"!=e&&"textEditor"!=e||(c.contentEditable=!0),"none"!==n){var s="content"==n?"contentEditableBody-"+t:"snippet-"+t;r.init_ckeditor({container:s,value:a.a.elems[e].template(),config:a.a.elems[e].ckeditorConfig})}i.forEach(function(t,e){t.onclick=r._bindEvtDisplayToolbox}),o.id=t,o.type=e,r.existing_data.push(o),console.log(r.existing_data)}}),c.a.render("canvas",{data:r.existing_data,trigger:"user"})},_bindEvtSelectionDropdown:function(){var t=this.value,e=this.getAttribute("data-target"),n=document.getElementById(e).firstElementChild;n.className="blockquote",n.classList.add("blockquote-"+t)},_bindEvtHeaderInput:function(){""==this.textContent&&(this.textContent="Click here to edit heading")},init_sortable:function(t){var e={sort:!0,touchStartThreshold:5,filter:'[data-content="empty"]',chosenClass:"canvas-content-chosen",ghostClass:"canvas-content-ghost",dragClass:"canvas-content-dragging",animation:300,easing:"cubic-bezier(1, 0, 0, 1)",handle:t.contentDraggableClass,direction:"vertical",onEnd:r.update_list};new s.a(t.container,e)},init_ckeditor:function(t){CKEDITOR.inline(t.container,t.config)},html_view:function(){var t=this.value;r.sourceSection.style.display="source"==t?"block":"none",r.htmlSection.style.display="html"==t?"block":"none"},close_preview:function(){r.outputPane.style.display="none"},generate_html:function(){r.outputPane.style.display="block";var t=document.querySelectorAll("#canvasContainer > .canvas-content-block"),e="",n=[];r.existing_data.length>0&&t.forEach(function(t,o){var c=t.querySelector(".canvas-content-snippet"),l=(c.getAttribute("data-component-type"),c.getAttribute("id"),c.firstElementChild),s=function(t){return{type:"type",id:"id",metadata:t}};if(l.classList.contains("tabs")){var r=l.querySelectorAll(".tab-content"),d='<div class="tabs">';d+=c.firstElementChild.firstElementChild.innerHTML,n.push(s([])),n[o].metadata=[],r.forEach(function(t,e){var c="";t.querySelectorAll(".canvas-content-block .canvas-content-snippet").forEach(function(t,e){var l=t.firstElementChild,r=l.classList.contains("blockquote")||l.classList.contains("well")?a(l):i(t);n[o].metadata.push(s(r)),c+=r}),d+='<section class="'.concat(t.className,'" id="').concat(t.id,'">').concat(c,"</section>")}),e+=d+"</div>"}else if(l.classList.contains("blockquote")||l.classList.contains("well")){var u=a(l);e+=u,n.push(s(u))}else{var b=i(c);e+=i(c),n.push(s(b))}});var o='<textarea style="display: none;">'.concat(JSON.stringify(n),"</textarea>");function a(t){var e=t.cloneNode(!0),n=e.querySelector(".cke_editable"),o=n.classList[0],a=i(n);n.remove();var c='\n\t\t\t\t<div class="'.concat(o,'">').concat(a,"</div>");return e.lastElementChild.insertAdjacentHTML("beforeend",c),e.outerHTML}function i(t){if(t.classList.contains("cke_editable")){var e=t.getAttribute("id");return CKEDITOR.instances[e].getData()}return t.innerHTML}r.htmlSection.innerHTML=r.existing_data.length>0?e:"<strong>Nothing to display here.</strong>",r.sourceSection.value=r.htmlSection.innerHTML+o,document.querySelectorAll("#outputContainer .blockquote-content-header").forEach(function(t,e){t.removeAttribute("contenteditable")})},save_html:function(){r.generate_html(),r.outputPane.style.display="none";var t={method:"insertToCKEDITOR",origin:window.location.origin,crxid:r.crxID,data:{html:r.sourceSection.value,ckeditorIntanceId:this.getAttribute("data-target")}};window.chrome.runtime.sendMessage(r.crxID,t)},run:function(){this.init()}};r.run()},8:function(t,e){t.exports={canvasContainer:document.getElementById("canvasContainer"),render:function(t,e){this[t](e)},toolbox:function(t){var e='<div class="toolbox" id="toolbox"><ul class="toolbox-toolbar" id="toolbar" tabIndex="-1">';for(key in t)e+='<li class="toolbar-item" data-action="add-component" data-ui-label="'.concat(key,'">\n\t\t\t\t<small>').concat(t[key].ui_label,"</small>\n\t\t\t</li>");this.canvasContainer.insertAdjacentHTML("beforeend",e+"</ul></div>")},canvas:function(t){var e=t.data.length;if("auto"==t.trigger){var n;n=e>0?"":'\n  \t\t<section class="canvas-content-block" data-content="empty">\n\t\t\t\t<img src="images/empty-icon.svg" alt="Empty">\n\t\t\t\t<h4 class="empty-text">There\'s nothing in here.<br><small>Start building your content.</small></h4>\n\t\t\t\t<div class="canvas-add-component">\n\t\t\t\t\t<button type="button" class="canvas-btn canvas-btn-primary" data-action="select-component">\n\t\t\t\t\t\tAdd Content Block\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</section>',this.canvasContainer.innerHTML=n,t.callback()}if("user"==t.trigger&&1==e){var o=document.querySelectorAll('[data-content="empty"]'),a=document.getElementById("toolbox");a.parentNode.removeChild(a),this.canvasContainer.removeChild(o[0]),this.canvasContainer.appendChild(a)}},content:function(t){var e=t.trigger.closest(".canvas-content-block"),n=e.getAttribute("data-content"),o=document.getElementById("toolbox").previousElementSibling.classList.contains("forTabs"),a=t.data.template(),i='\n  \t<section class="canvas-content-block" id="'.concat(t.id,'">\n\t\t\t<div class="canvas-content-config"> \n\t\t\t\t<span class="canvas-content-draggable \n          ').concat(o?"canvasDraggableSub_"+e.querySelector(".tab-content.in").getAttribute("id"):"canvasDraggableMain",'"></span>\n\t\t\t\t').concat(t.data.hasOwnProperty("types")?function(){for(var e="",n=0;n<=t.data.types.length-1;n++)e+='<option value="'.concat(t.data.types[n].ui_value,'">').concat(t.data.types[n].ui_label,"</option>");return'<select class="canvas-form-control" name="s-'.concat(t.id,'" data-target="snippet-').concat(t.id,'">').concat(e,"</select>")}():"",'\n\t\t\t\t<button class="canvas-btn canvas-btn-xs" data-target="').concat(t.id,'">\n\t\t\t\t\t<i class="icon-delete"></i> Remove\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div class="canvas-content-snippet" id="snippet-').concat(t.id,'" data-component-type="').concat(t.type,'">\n        ').concat(a,"\n      </div>\n\t\t\t").concat(t.data.hasChildContent?'\n\t\t\t<div class="canvas-add-component canvas-add-subcontent">\n\t\t\t\t<button type="button" class="canvas-btn canvas-btn-xs btn-has-text forTabs" data-action="select-component">\n\t\t\t\t\t<i class="icon-plus">&#43;</i> Add Content to this tab\n\t\t\t\t</button>\n\t\t\t</div>\n  \t\t':"","\n\t\t\t").concat(o?"":'\n\t\t\t\t<div class="canvas-content-action canvas-add-component">\n\t\t\t\t\t<div class="content-action-hotspot">\n\t\t\t\t\t\t<button type="button" class="canvas-btn canvas-btn-xs" data-action="select-component">\n\t\t\t\t\t\t\t<i class="icon-plus">&#43;</i>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n  \t\t',"\n\t\t</section>");if("empty"===n)this.canvasContainer.insertAdjacentHTML("beforeend",i);else if(o){var c=e.querySelector(".tab-content.in");c.getAttribute("id");0==c.childNodes.length?c.innerHTML=i:c.insertAdjacentHTML("beforeend",i)}else e.insertAdjacentHTML("afterend",i);var l=document.querySelectorAll("#"+t.id+' .canvas-add-component [data-action="select-component"]');t.callback(l)},update:function(){}}}});