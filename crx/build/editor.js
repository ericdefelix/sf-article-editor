!function(t){function e(e){for(var o,c,l=e[0],r=e[1],s=e[2],u=0,m=[];u<l.length;u++)c=l[u],a[c]&&m.push(a[c][0]),a[c]=0;for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);for(d&&d(e);m.length;)m.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,l=1;l<n.length;l++){var r=n[l];0!==a[r]&&(o=!1)}o&&(i.splice(e--,1),t=c(c.s=n[0]))}return t}var o={},a={0:0},i=[];function c(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=t,c.c=o,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)c.d(n,o,function(e){return t[e]}.bind(null,o));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="";var l=window.webpackJsonp=window.webpackJsonp||[],r=l.push.bind(l);l.push=e,l=l.slice();for(var s=0;s<l.length;s++)e(l[s]);var d=r;i.push([95,1]),n()}({1:function(t,e){t.exports={elems:{textEditor:{ui_label:"Text Editor",template:function(t){var e=void 0!==t?t.value:"<span>Click here to start editing</span>";return'<div class="editor-content">'.concat(e,"</div>")},hasChildContent:!1,contentEditorBindToElem:"container",contentEditorConfig:{plugins:"lists link image table imagetools",toolbar:"undo redo | formatselect | bold italic strikethrough | alignleft aligncenter alignright alignjustify | link image table | numlist bullist"}},styledLists:{ui_label:"Styled Lists",template:function(t){var e=void 0===t?"ol":t;return"\n\t\t\t\t\t<".concat(e,' class="list-bullet-circular">\n\t\t\t\t\t\t<li>Click here to start editing list</li>\n\t\t\t\t\t\t<li>Or paste content here.</li>\n\t\t\t\t\t</').concat(e,">")},hasChildContent:!1,contentEditorBindToElem:"container",contentEditorConfig:{plugins:"lists link image table imagetools",toolbar:"undo redo | numlist bullist | link image imageupload table | bold italic strikethrough"}},blockQuotes:{ui_label:"Block Quotes",types:[{ui_label:"Info",ui_value:"info"},{ui_label:"Tip",ui_value:"tip"},{ui_label:"Attention",ui_value:"alert"}],template:function(t){var e=function(){var e=void 0===t?"Click here to edit heading":t.variables[0];return e},n=function(){var e=void 0===t?"Click here to edit/paste content":t.variables[1];return e};return'\n\t\t\t\t<div class="blockquote blockquote-'.concat(function(){return"info"}(),'" role="blockquote">\n\t\t\t\t\t<div class="blockquote-addon"></div>\n\t\t\t\t\t<div class="blockquote-content">\n\t\t\t\t\t\t<h5 class="blockquote-content-header">').concat(e(),'</h5>\n\t\t\t\t\t\t<div class="blockquote-content-body">\n\t\t\t\t\t\t\t').concat(n(),"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>")},hasChildContent:!1,contentEditorBindToElem:"content",contentEditorConfig:{plugins:"link image table",toolbar:"undo redo | formatselect | bold italic strikethrough | alignleft aligncenter alignright alignjustify | link image table"}},wellContainer:{ui_label:"Generic Box",template:function(t){return'\n\t\t\t\t\t<div class="well">\n\t\t\t\t\t\t<h5 class="well-heading">Click here to edit heading</h5>\n\t\t\t\t\t\t<div class="well-body"><p>Click here to edit/paste content.</p></div>\n\t\t\t\t\t</div>'},hasChildContent:!1,contentEditorBindToElem:"content",contentEditorConfig:{plugins:"link image table",toolbar:"undo redo | formatselect | bold italic strikethrough | alignleft aligncenter alignright alignjustify | link image table"}},genericTabs:{ui_label:"Generic Tabs",template:function(t){var e,n="",o="",a=function(){return Math.floor(9e4*Math.random())+1e4},i=[{label:"Desktop",id:a(),content:[]},{label:"Web",id:a(),content:[]},{label:"Mobile",id:a(),content:[]}],c=void 0!==t;e=c?t.subnodes:i;for(var l=0;l<=e.length-1;l++){var r=e[l].id,s=e[l].label;n+='\n\t\t\t\t\t\t<li class="tab-item'.concat(0==l?" active":"",'">\n\t\t\t\t\t\t\t<a href="#" class="tab-item-link" id="target_tab-').concat(r,'">').concat(s,"</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t"),o+='<div class="tab-content'.concat(0==l?" in":"",'" id="tab-').concat(r,'">').concat(c?"{{ tab-"+r+" }}":"","</div>")}return'\n\t\t\t\t\t<div class="tabs">\n\t\t\t\t\t\t<div class="tabs-bar"><ul class="tab-nav">'.concat(n,"</ul></div>").concat(o,"\n\t\t\t\t\t</div>\n\t\t\t\t")},contentEditorBindToElem:"none",hasChildContent:!0}},keywords:["blockquote","list-bullet-circular","well","tabs","editor-content"],keyword_map:{blockquote:"blockQuotes","list-bullet-circular":"styledLists",well:"wellContainer",tabs:"genericTabs","editor-content":"textEditor"},getTemplate:function(t,e){return this.elems[t].template(e)}}},13:function(t,e){t.exports={canvasContainer:document.getElementById("canvasContainer"),render:function(t,e){this[t](e)},toolbox:function(t){var e='<div class="toolbox" id="toolbox"><ul class="toolbox-toolbar" id="toolbar" tabIndex="-1">';for(key in t)e+='<li class="toolbar-item" data-action="add-component" data-ui-label="'.concat(key,'">\n\t\t\t\t<small>').concat(t[key].ui_label,"</small>\n\t\t\t</li>");this.canvasContainer.insertAdjacentHTML("beforeend",e+"</ul></div>")},canvas:function(e){var n=e.data.length,o=e.data,a=e.trigger,i=e.dependencies[0],c=e.dependencies[1],l=document.querySelector('[data-content="empty"]');if("auto"==a){var r;r=n>0?function(){var e="";try{for(var n=0;n<=o.length-1;n++){var a,l=o[n].id,r=o[n].type,s=o[n].metadata,d=void 0;if(a={id:l,type:r,data:i.elems[r]},s.hasOwnProperty("subnodes")&&s.subnodes.length>0){d=i.elems[r].template({subnodes:s.subnodes});for(var u=t.exports.renderContentBlock(a,d,void 0),m=0;m<=s.subnodes.length-1;m++){var p=s.subnodes[m],b="";if(p.content.length>0)for(var g=0;g<=p.content.length-1;g++){var v={type:p.content[g].type,id:p.content[g].id,data:i.elems[p.content[g].type]},h=i.elems[p.content[g].type].template();b+=t.exports.renderContentBlock(v,h,p.id)}u=c(u,"{{ tab-"+p.id+" }}",b)}e+=u}else d=s.html,e+=t.exports.renderContentBlock(a,d,void 0)}}catch(t){console.log(t),console.log("ContentBlocks module is missing")}return e}():'\n      <section class="canvas-content-block" data-content="empty"> \n        <img src="images/empty-icon.svg" alt="Empty">\n        <h4 class="empty-text">There\'s nothing in here.<br><small>Start building your content.</small></h4>\n        <div class="canvas-add-component">\n          <button type="button" class="canvas-btn canvas-btn-primary" data-action="select-component">\n            Add Content Block\n          </button>\n        </div>\n      </section>',this.canvasContainer.innerHTML=r}if("user"==a&&(0==n&&this.canvasContainer.insertAdjacentHTML("afterbegin",'\n      <section class="canvas-content-block" data-content="empty"> \n        <img src="images/empty-icon.svg" alt="Empty">\n        <h4 class="empty-text">There\'s nothing in here.<br><small>Start building your content.</small></h4>\n        <div class="canvas-add-component">\n          <button type="button" class="canvas-btn canvas-btn-primary" data-action="select-component">\n            Add Content Block\n          </button>\n        </div>\n      </section>'),1==n&&l)){var s=document.getElementById("toolbox");s.parentNode.removeChild(s),this.canvasContainer.removeChild(l),this.canvasContainer.appendChild(s)}e.hasOwnProperty("callback")&&e.callback()},content:function(e){var n,o,a=e.trigger.closest(".canvas-content-block"),i=a.getAttribute("data-content"),c=document.getElementById("toolbox").previousElementSibling.classList.contains("forTabs"),l=e.data.template();if("empty"===i)n=t.exports.renderContentBlock(e,l,void 0),this.canvasContainer.insertAdjacentHTML("beforeend",n);else if(c){var r=a.querySelector(".tab-content.in").getAttribute("id");n=t.exports.renderContentBlock(e,l,r);var s=a.querySelector(".tab-content.in");s.getAttribute("id");0==s.childNodes.length?s.innerHTML=n:s.insertAdjacentHTML("beforeend",n)}else n=t.exports.renderContentBlock(e,l,void 0),a.insertAdjacentHTML("afterend",n);o=document.querySelectorAll("#"+e.id+' .canvas-add-component [data-action="select-component"]'),e.callback(o)},renderContentBlock:function(e,n,o){return'\n    <section class="canvas-content-block" id="'.concat(e.id,'">\n      <div class="canvas-content-config"> \n        <span class="canvas-content-draggable \n          ').concat(void 0===o?"canvasDraggableMain":"canvasDraggableSub_"+o,'"></span>\n        ').concat(e.data.hasOwnProperty("types")?t.exports.renderOptions(e):"",'\n        <button class="canvas-btn canvas-btn-xs" \n          data-action="remove-component"\n          data-target="').concat(e.id,'" data-target-type="').concat(e.type,'">\n          <i class="icon-delete"></i> Remove\n        </button>\n      </div>\n      <div class="canvas-content-snippet" id="snippet-').concat(e.id,'" data-component-type="').concat(e.type,'">\n        ').concat(n,"\n      </div>\n      ").concat(e.data.hasChildContent?t.exports.renderAddSubContent():"","\n      ").concat(void 0===o?t.exports.renderAddMainContent():"","\n    </section>")},renderOptions:function(t){for(var e="",n=0;n<=t.data.types.length-1;n++)e+='<option value="'.concat(t.data.types[n].ui_value,'">').concat(t.data.types[n].ui_label,"</option>");return'<select class="canvas-form-control" name="s-'.concat(t.id,'" data-target="snippet-').concat(t.id,'">').concat(e,"</select>")},renderAddSubContent:function(){return'\n    <div class="canvas-add-component canvas-add-subcontent">\n      <button type="button" class="canvas-btn canvas-btn-xs btn-has-text forTabs" data-action="select-component">\n        <i class="icon-plus">&#43;</i> Add Content to this tab\n      </button>\n    </div>\n    '},renderAddMainContent:function(){return'\n      <div class="canvas-content-action canvas-add-component">\n        <div class="content-action-hotspot">\n          <button type="button" class="canvas-btn canvas-btn-xs" data-action="select-component">\n            <i class="icon-plus">&#43;</i>\n          </button>\n        </div>\n      </div>\n    '},update:function(){}}},76:function(t,e,n){},95:function(t,e,n){"use strict";n.r(e);n(37),n(30),n(49),n(53),n(35),n(76),n(54),n(55);function o(t){return t.replace(/\s{2,10}/g," ")}function a(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(2,10)}n(78),n(79),n(85),n(86),n(89),n(90);function i(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(t,e){for(var n=function(){return{id:e.GenerateID(),type:"",metadata:{html:""}}},o=function(t){for(var n=t.split(" "),o=!1,a=0;a<n.length;a++)if(-1!==e.ContentBlocks.keywords.indexOf(n[a])){o=!0;break}return o},a=function(t){for(var n=t.split(" "),o="",a=0;a<n.length;a++)if(-1!==e.ContentBlocks.keywords.indexOf(n[a])){o=e.ContentBlocks.keyword_map[n[a]];break}return o},c=i(t),l=[],r=!1,s=function(t){var i=c[t],s=i.nodeType,d=i.outerHTML,u=i.nodeValue,m=n();1==s&&i.hasAttribute("class")&&e.ContentBlocks.elems[a(i.classList.value)].hasChildContent&&(m.subnodes=[],i.querySelectorAll(".tab-item-link").forEach(function(t,e){var o=t.textContent,c=t.getAttribute("id").split("target_")[1],l=i.querySelector("#"+c);if(m.subnodes.push({label:o,id:c,content:[]}),null!=l.firstChild){var r=l.children,s=!0,d=!1,u=void 0;try{for(var p,b=r[Symbol.iterator]();!(s=(p=b.next()).done);s=!0){var g=p.value,v=n();v.type=a(g.classList.value),v.metadata.html=g.outerHTML,m.subnodes[e].content.push(v)}}catch(t){d=!0,u=t}finally{try{s||null==b.return||b.return()}finally{if(d)throw u}}}}),r=!0);if(1==s&&i.hasAttribute("class")&&o(i.classList.value)&&(m.type=a(i.classList.value),m.metadata.html=d.replace(/^\s+|\s+$/g,"").trim(),l.push(m),r=!0),1!=s||i.hasAttribute("class")||o("")||(m.type="textEditor",m.metadata.html=d.replace(/^\s+|\s+$/g,"").trim(),l.push(m)),!r){if(3==s)u.replace(/^\s+|\s+$/g,"").trim();m.type="textEditor",((1==s||3==s&&"undefined"!=typeof str&&""!==str)&&0==l.length||(1==s||3==s&&"undefined"!=typeof str&&""!==str)&&l.length>0&&"textEditor"!==l[l.length-1].type)&&(m.metadata.html=3==s?u:d,l.push(m)),(1==s||3==s&&"undefined"!=typeof str&&""!==str)&&l.length>0&&"textEditor"===l[l.length-1].type&&(l[l.length-1].metadata.html+=3==s?u:d),r=!1}},d=0;d<c.length;d++)s(d);return console.log(l),l}var l=n(1),r=n.n(l),s=n(13),d=n.n(s),u=n(60),m=n.n(u),p={},b={crxID:"",contentEditorInstanceId:"",instanceHTML:"",outputPane:document.getElementById("outputContainer"),htmlSection:document.getElementById("htmlOutputContainer"),sourceSection:document.getElementById("viewSourcePreview"),btnPreview:document.getElementById("btnPreview"),btnSave:document.getElementById("btnSave"),btnClose:document.getElementById("btnCloseOutputContainer"),btnThemeSelector:document.getElementById("btnThemeSelector"),toggleView:document.getElementById("outputContainerToggleView"),forTab:!1,existing_data:[],image_gallery:[],html_data_json:"",toolbox:void 0,init:function(){try{window.chrome.storage.sync.get(["contentEditorInstanceId"],function(t){b.contentEditorInstanceId=t.contentEditorInstanceId,b.btnSave.setAttribute("data-target",b.contentEditorInstanceId),b.crxID=window.chrome.runtime.id}),window.chrome.storage.sync.get(["instanceHTML"],function(t){var e=t.instanceHTML;console.log(e),""===e&&void 0===e||(b.htmlSection.insertAdjacentHTML("afterbegin",e),b.existing_data=c(b.htmlSection.childNodes,{GenerateID:a,ContentBlocks:r.a}),b.start_app())}),window.chrome.storage.sync.get(["image_gallery"],function(t){b.image_gallery=JSON.parse(t.image_gallery),console.log(b.image_gallery)})}catch(t){b.existing_data=[],b.existing_data=c(b.htmlSection.childNodes,{GenerateID:a,ContentBlocks:r.a}),b.start_app(),console.log("Attempting to do a chrome api method. You are in stand-alone mode")}},start_app:function(){b.build_ui(),b.init_sortable({container:document.getElementById("canvasContainer"),contentDraggableClass:".canvasDraggableMain"}),b.btnPreview.onclick=b.generate_html,b.btnSave.onclick=b.save_html,b.toggleView.onchange=b.html_view,b.btnClose.onclick=b.close_preview,b.btnThemeSelector.onchange=b.select_theme},parse_existing_html:function(t){return b.outputPane.style.display="block",b.htmlSection.innerHTML=t,c(b.htmlSection.childNodes,{GenerateID:a,ContentBlocks:r.a})},build_ui:function(){d.a.render("canvas",{data:b.existing_data,trigger:"auto",dependencies:[r.a,function(t,e,n){return t.replace(e,n)}],callback:function(){var t;d.a.render("toolbox",r.a.elems),document.querySelectorAll('[data-action="select-component"]').forEach(function(t,e){t.onclick=b._bindEvtDisplayToolbox}),document.querySelectorAll('[data-action="add-component"]').forEach(function(t,e){t.onclick=b._bindEvtAddComponent}),document.querySelectorAll('[data-action="remove-component"]').forEach(function(t,e){t.onclick=b._bindEvtRemoveComponent}),(t=document.getElementById("canvasContainer").querySelectorAll(".canvas-content-block")).length>0&&t.forEach(function(t,e){if("empty"!==t.getAttribute("data-content")){var n=t.getAttribute("id"),o=t.querySelector(".canvas-content-snippet").getAttribute("data-component-type");b.handleEditEventsToDOM(n,o)}}),document.addEventListener("click",function(t){null===function(t,e){for(Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),n=e.length;--n>=0&&e.item(n)!==this;);return n>-1});t&&t!==document;t=t.parentNode)if(t.matches(e))return t;return null}(t.target,".canvas-add-component")&&toolbox.classList.remove("in")},!1),b.togglePageButtons()}})},_bindEvtDisplayToolbox:function(){var t=document.getElementById("toolbox");t.classList.remove("in"),t.style.display="block",this.parentElement.appendChild(t);var e=t.offsetWidth,n=this.parentElement.classList.contains("canvas-add-subcontent");t.style.left=n?"0":"calc(50% - "+(e/2+4)+"px)",t.classList.contains("in")?t.classList.remove("in"):t.classList.add("in"),t.focus()},_bindEvtAddComponent:function(){var t=a(),e=this.getAttribute("data-ui-label");0===b.existing_data.length&&b.existing_data.push({}),d.a.render("content",{id:t,type:e,data:r.a.elems[e],trigger:this,callback:function(n){b.handleEditEventsToDOM(t,e),n.forEach(function(t,e){t.onclick=b._bindEvtDisplayToolbox}),document.querySelector('[data-action="remove-component"][data-target="'+t+'"]').onclick=b._bindEvtRemoveComponent,d.a.render("canvas",{data:b.existing_data,dependencies:[],trigger:"user"}),b.updateData(),b.togglePageButtons()}})},_bindEvtSelectionDropdown:function(){var t=this.value,e=this.getAttribute("data-target"),n=document.getElementById(e).firstElementChild;n.className="blockquote",n.classList.add("blockquote-"+t)},_bindEvtHeaderInput:function(){""==this.textContent&&(this.textContent="Click here to edit heading")},_bindEvtRemoveComponent:function(){var t=this.getAttribute("data-target"),e=document.getElementById("canvasContainer"),n=document.getElementById(t),o=document.getElementById("toolbox");o.classList.remove("in"),o.style.display="block",e.appendChild(o),n.remove(),b.updateData(),0===b.existing_data.length&&(d.a.render("canvas",{data:b.existing_data,dependencies:[],trigger:"user"}),e.querySelector('[data-action="select-component"]').onclick=b._bindEvtDisplayToolbox)},togglePageButtons:function(){b.btnPreview.style.display=0==b.existing_data.length?"none":"initial",b.btnSave.style.display=0==b.existing_data.length?"none":"initial"},handleEditEventsToDOM:function(t,e){var n=document.getElementById("snippet-"+t),o=r.a.elems[e].contentEditorBindToElem,a=function(t,e,n){var o=document.querySelector("#snippet-"+t+" ."+e),a=document.querySelector("#snippet-"+t+" ."+n);o.contentEditable=!0,a.contentEditable=!0,o.onblur=b._bindEvtHeaderInput,a.id="contentEditableBody-"+t};("blockQuotes"==e&&(a(t,"blockquote-content-header","blockquote-content-body",b._bindEvtHeaderInput),document.querySelector('[data-target="snippet-'+t+'"]').onchange=b._bindEvtSelectionDropdown),"wellContainer"==e&&a(t,"well-heading","well-body",b._bindEvtHeaderInput),"genericTabs"==e)&&n.querySelectorAll(".tab-content").forEach(function(t,e){var n=t.getAttribute("id");b.init_sortable({container:document.getElementById(n),contentDraggableClass:".canvasDraggableSub_"+n})});if("styledLists"!=e&&"textEditor"!=e||(n.contentEditable=!0),"none"!==o){var i="content"==o?"contentEditableBody-"+t:"snippet-"+t;b.init_contentEditor({container:i,value:r.a.elems[e].template(),config:r.a.elems[e].contentEditorConfig})}},init_sortable:function(t){var e={sort:!0,touchStartThreshold:5,filter:'[data-content="empty"]',chosenClass:"canvas-content-chosen",ghostClass:"canvas-content-ghost",dragClass:"canvas-content-dragging",animation:300,easing:"cubic-bezier(1, 0, 0, 1)",handle:t.contentDraggableClass,direction:"vertical",onUpdate:function(){b.updateData(),console.log("list updated")}};new m.a(t.container,e)},init_contentEditor:function(t){var e={selector:"#"+t.container,inline:!0,menubar:!1,default_link_target:"_blank"};e.toolbar=t.config.toolbar,e.plugins=t.config.plugins,-1!==t.config.toolbar.indexOf("image")&&(e.image_title=!0,e.automatic_uploads=!0,e["paste_data_images "]=!0,e.file_picker_types="image",e.file_picker_callback=function(t,e,n){}),tinymce.init(e)},updateData:function(){var t=[],e=function(t){var e=t.querySelector(".canvas-content-snippet").firstElementChild.cloneNode(!0);return e.querySelectorAll('[contenteditable="true"]').forEach(function(t){t.removeAttribute("id"),t.removeAttribute("contentEditable"),t.removeAttribute("style"),t.removeAttribute("spellcheck"),t.classList.contains("mce-content-body")&&t.classList.remove("mce-content-body")}),o(e.outerHTML)},n=function(t,n,a){return r.a.elems[t].hasChildContent?{subnodes:[],html:o(a)}:{html:e(n),variables:[]}};document.querySelectorAll("#canvasContainer > .canvas-content-block").forEach(function(e){var o,a,i,c=e.querySelector(".canvas-content-snippet").getAttribute("data-component-type"),l={id:e.getAttribute("id"),type:c,metadata:{}};if(l.metadata=n(c,e,e.querySelector(".canvas-content-snippet").innerHTML),r.a.elems[c].hasChildContent){var s=e.querySelectorAll(".tab-item-link"),d=[];s.forEach(function(t,e){var o=document.getElementById(t.getAttribute("id").split("target_")[1]),a=o.getAttribute("id"),i=t.textContent;if(l.metadata.subnodes.push({label:i,id:a,content:[]}),o.children.length>0){var c=o.querySelectorAll(".canvas-content-block"),r="";c.forEach(function(t){var o=t.getAttribute("id"),a=document.getElementById("snippet-"+o).getAttribute("data-component-type"),i=n(a,t,"");l.metadata.subnodes[e].content.push({id:o,type:a,metadata:i}),r+=i.html}),d.push(r)}}),l.metadata.html=(o=l.metadata.html,a=d,(i=document.createElement("DIV")).innerHTML=o,i.querySelectorAll(".tab-content").forEach(function(t,e){t.innerHTML=void 0!==a[e]?a[e]:""}),i.innerHTML)}t.push(l)}),b.existing_data=t,console.log(b.existing_data)},html_view:function(){var t=this.value;b.sourceSection.style.display="source"==t?"block":"none",b.htmlSection.style.display="html"==t?"block":"none"},close_preview:function(){b.outputPane.style.display="none"},select_theme:function(){var t=this.value;document.querySelector("body").classList.value="",document.querySelector("body").classList.add("sf-"+t)},generate_html:function(){b.updateData(),b.outputPane.style.display="block";var t="";b.existing_data.forEach(function(e){t+=e.metadata.html}),b.htmlSection.innerHTML=b.existing_data.length>0?t:"<strong>Nothing to display here.</strong>",b.htmlSection.querySelectorAll("img").forEach(function(t){p.hasOwnProperty(t.src)&&(t.src=p[t.src])}),b.sourceSection.value=b.htmlSection.innerHTML,b.htmlSection.querySelectorAll(".tabs").forEach(function(t,e){t.querySelectorAll(".tab-item-link").forEach(function(e,n){var o=e.getAttribute("id").split("target_")[1];e.setAttribute("data-target","preview_"+o),t.querySelector("#"+o).id="preview_"+o})})},save_html:function(){b.generate_html(),b.outputPane.style.display="none";var t={method:"insertToContentEditor",origin:window.location.origin,crxid:b.crxID,data:{html:b.sourceSection.value+b.html_data_json,ckeditorIntanceId:this.getAttribute("data-target")}};try{window.chrome.runtime.sendMessage(b.crxID,t)}catch(t){console.log("Attempting to do a chrome api method. Page origin is not via chrome extension")}},run:function(){this.init()}};b.run()}});